# Rust-Android
## 1. Create an Android project and create a new Java Class named hello.java
```
package com.example.rustapp;

public class HelloRust {
    static {
        System.loadLibrary("android");
    }

    public static native String sayHello(String input);

}

```
## 2. Run javac to compile the hello.java, the get the following header file
```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_example_rustapp_HelloRust */

#ifndef _Included_com_example_rustapp_HelloRust
#define _Included_com_example_rustapp_HelloRust
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     com_example_rustapp_HelloRust
 * Method:    sayHello
 * Signature: (Ljava/lang/String;)Ljava/lang/String;
 */
JNIEXPORT jstring JNICALL Java_com_example_rustapp_HelloRust_sayHello
  (JNIEnv *, jclass, jstring);

#ifdef __cplusplus
}
#endif
#endif

```

## 3.  The Rust side
cargo.toml
```
[target.'cfg(target_os="android")'.dependencies]
jni = { version = "0.13.1", default-features = false }

[lib]
crate-type = ["dylib"]

```
lib.rs
```
/// Expose the JNI interface for android below
#[cfg(target_os="android")]
#[allow(non_snake_case)]
pub mod android {
    extern crate jni;

    use super::*;
    use self::jni::JNIEnv;
    use self::jni::objects::{JClass, JString};
    use self::jni::sys::{jstring};

    #[no_mangle]
    pub extern "system" fn Java_com_example_rustapp_HelloRust_sayHello(env: JNIEnv, _: JClass, input: JString) -> jstring {
        let input : String = env.get_string(input).expect("Couldn't get Java string").into();

        let output = env.new_string(format!("Hello, {}!", input)).expect("Couldn't create Java String!");

        output.into_inner()
    }

}
```    
